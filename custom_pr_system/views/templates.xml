<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!-- Report Action -->
    <record id="action_report_petroraq_draft_invoice" model="ir.actions.report">
        <field name="name">PetroRaq Draft Invoice</field>
        <field name="model">purchase.order</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">custom_pr_system.report_petroraq_draft_invoice</field>
        <field name="report_file">custom_pr_system.report_petroraq_draft_invoice</field>
        <field name="print_report_name">'PetroRaq_Draft_Invoice_' + object.name</field>
        <field name="binding_model_id" ref="purchase.model_purchase_order"/>
        <field name="binding_type">report</field>
    </record>
    <template id="report_petroraq_draft_invoice">
        <t t-call="web.external_layout">
            <main>
                <div class="page" style="margin-top:0; padding-top:0;">
                    <table class='table table-borderless' style="width:40%; float:right;margin-top:10px;">
                        <tbody>
                            <tr style="background-color:#f9f9f9;">
                                <td style="text-align:right; padding:4px;">Requested By</td>
                                <td style="text-align:right; padding:4px;">
                                    <t t-esc="docs[0].requested_by"/>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align:right; padding:4px;">Department</td>
                                <td style="text-align:right; padding:4px;">
                                    <t t-esc="docs[0].department"/>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align:right; padding:4px;">Supervisor</td>
                                <td style="text-align:right; padding:4px;">
                                    <t t-esc="docs[0].supervisor"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class='table table-borderless' style="width:100%; margin:20px 0;">
                        <tr>
                            <td style="text-align:left; width:33%;">
                                <h5 style="margin:0;">Draft Invoice</h5>
                            </td>
                            <td style="text-align:center; width:34%; ">
                                <h5 style="margin:0;">
                                    <t t-esc="docs[0].name"/>
                                </h5>
                            </td>
                            <td style="text-align:right; width:33%;">
                                <h5 style="margin:0;">مسودة فاتورة</h5>
                            </td>
                        </tr>
                    </table>
                    <table class='table table-borderless' style="width:45%; margin:20px 0; float:right;">
                        <tr>
                            <td style="text-align:left; width:33%;">
                                <span style="margin:0;">Invoice Date:</span>
                            </td>
                            <td style="text-align:center; width:34%; ">
                                <span style="margin:0;">
                                    <t t-esc="docs[0].date_request or ''"/>
                                </span>
                            </td>
                            <td style="text-align:right; width:33%;">
                                <span>:تاريخ الفاتورة</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:left; width:33%;">
                                <span style="margin:0;">Delivery Date:</span>
                            </td>
                            <td style="text-align:center; width:34%; ">
                                <span style="margin:0;">
                                    <t t-esc="docs[0].date_planned or ''"/>
                                </span>
                            </td>
                            <td style="text-align:right; width:33%;">
                                <span>:تاريخ التوصيل</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:left; width:33%;">
                                <span style="margin:0;">Source:</span>
                            </td>
                            <td style="text-align:center; width:34%; ">
                                <span style="margin:0;">
                                    <t t-esc="docs[0].origin or ''"/>
                                </span>
                            </td>
                            <td style="text-align:right; width:33%;">
                                <span>:رقم الإشارة</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:left; width:33%;">
                                <span style="margin:0;">Reference:</span>
                            </td>
                            <td style="text-align:center; width:34%; ">
                                <span style="margin:0;">
                                    <t t-esc="docs[0].supervisor or ''"/>
                                </span>
                            </td>
                            <td style="text-align:right; width:33%;">
                                <span>:رقم الإشارة</span>
                            </td>
                        </tr>
                    </table>
                    <table class="table table-sm table-bordered" style="width:100%; border-collapse:collapse;">
                        <thead>
                            <tr>
                                <th>Description /
                                    <span>الوصف</span>
                                </th>
                                <th>Quantity /
                                    <span>الكمية</span>
                                </th>
                                <th>Taxes /
                                    <span>اﻟﻀﺮاﺋﺐ</span>
                                </th>
                                <th>Unit Price /
                                    <span>سعر الوحدة</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="docs[0].custom_line_ids" t-as="l">
                                <tr>
                                    <td>
                                        <t t-esc="l.name"/>
                                    </td>
                                    <td>
                                        <t t-esc="l.quantity"/>
                                    </td>
                                    <td>
                                        <span>15%</span>
                                    </td>
                                    <td>
                                        <t t-esc="l.price_unit"/>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                    <table class="table table-striped" style="width:40%; margin-top:10px; float:left;">
                        <tbody>
                            <tr>
                                <td style="text-align:right;">Subtotal /
                                    <span>الاجمالي الفرعي</span>
                                </td>
                                <td style="text-align:right;">
                                    <t t-esc="docs[0].subtotal"/>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align:right;">VAT 15% /
                                    <span>الضريبة</span>
                                </td>
                                <td style="text-align:right;">
                                    <t t-esc="docs[0].tax_15"/>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align:right;">Total /
                                    <span>المجموع</span>
                                </td>
                                <td style="text-align:right;">
                                    <t t-esc="docs[0].grand_total"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class='table table-borderless' style="width:100%; margin:20px 0;">
                        <tr>
                            <td style="text-align:left; width:33%;">
                                <h6 style="margin:0;">Payment Reference:</h6>
                            </td>
                            <td style="text-align:center; width:34%; ">
                                <h6 style="margin:0;">via Bank</h6>
                            </td>
                            <td style="text-align:right; width:33%;">
                                <h6>: رقم إشارة الدفع</h6>
                            </td>
                        </tr>
                    </table>
                    <p style="text-align:end;">Payment terms: Immediate Payment</p>
                </div>
            </main>
        </t>
    </template>
    <!-- Custom Footer Template -->
    <template id="custom_footer">
        <div class="footer text-center" style="font-size:12px; border-top:1px solid #000; padding-top:6px;">
            <p style="margin:2px 0;">00966133614446 info@petroraq.com www.petroraq.com 311428741500003</p>
        </div>
    </template>
    <!-- Footer replacements for all external layouts -->
    <template id="external_layout_standard_footer" inherit_id="web.external_layout_standard">
        <xpath expr="//div[contains(@t-attf-class,'footer')]" position="replace">
            <t t-call="custom_pr_system.custom_footer"/>
        </xpath>
    </template>
    <template id="external_layout_boxed_footer" inherit_id="web.external_layout_boxed">
        <xpath expr="//div[contains(@t-attf-class,'footer')]" position="replace">
            <t t-call="custom_pr_system.custom_footer"/>
        </xpath>
    </template>
    <template id="external_layout_bold_footer" inherit_id="web.external_layout_bold">
        <xpath expr="//div[contains(@t-attf-class,'footer')]" position="replace">
            <t t-call="custom_pr_system.custom_footer"/>
        </xpath>
    </template>
    <template id="external_layout_striped_footer" inherit_id="web.external_layout_striped">
        <xpath expr="//div[contains(@t-attf-class,'footer')]" position="replace">
            <t t-call="custom_pr_system.custom_footer"/>
        </xpath>
    </template>
</odoo>