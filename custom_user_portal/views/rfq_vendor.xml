<odoo>
    <template id="portal_purchase_requisition_card" inherit_id="portal.portal_my_home">
        <xpath expr="//div[@id='portal_client_category']" position="after">
            <t t-if="not request.env.user.employee_id">
                <div class="o_portal_category row g-2 mt-3" id="portal_pr_category">
                    <div class="col-12 col-md-6 col-lg-6">
                        <a href="/my/rfqs" style="text-decoration: none;">
                            <div class="card h-100 border-0" style="background-color: #bcc2c8 !important;">
                                <div class="card-body d-flex flex-column justify-content-between">
                                    <div>
                                        <h6 class="text-muted text-uppercase">Request For Quotation</h6>
                                        <p class="mb-2 text-dark">Submit and view your quotations</p>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </t>
        </xpath>
    </template>
    <template id="portal_rfq_list_template" name="Portal RFQ List">
        <t t-call="portal.portal_layout">
            <div class="container mt-4">
                <h3>My RFQs (Following)</h3>
                <t t-if="rfqs">
                    <table class="table table-striped table-bordered mt-3">
                        <thead>
                            <tr>
                                <th>RFQ Number</th>
                                <th>Vendor</th>
                                <th>Deadline</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="rfqs" t-as="rfq">
                                <tr>
                                    <td>
                                        <a t-att-href="'/my/rfqs/%s' % rfq.id">
                                            <t t-esc="rfq.name"/>
                                        </a>
                                    </td>
                                    <td>
                                        <t t-esc="rfq.partner_id.name"/>
                                    </td>
                                    <td>
                                        <t t-esc="rfq.date_order"/>
                                    </td>
                                    <td class="text-start">
                                        <t t-set="has_quotation"
                                        t-value="request.env['purchase.quotation'].sudo().search_count([
                                                ('rfq_origin', '=', rfq.name),
                                                ('email_address', '=', request.env.user.email)
                                        ]) > 0"/>
                                        <t t-if="not has_quotation">
                                            <a t-att-href="'/my/rfq/%s/quotation' % rfq.id"
                                            class="btn btn-sm btn-primary"
                                            style="background-color: #122AA0 !important; border-color: #122AA0 !important;">
                                                Create Quotation
                                            </a>
                                        </t>
                                        <t t-else="">
                                            <button class="btn btn-sm btn-secondary" disabled="true">
                                                Quotation Submitted
                                            </button>
                                        </t>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </t>
                <t t-else="">
                    <p>No RFQs found.</p>
                </t>
            </div>
        </t>
    </template>
    <template id="portal_rfq_view_template" name="Portal RFQ View">
        <t t-call="portal.portal_layout">
            <div class="container mt-4">
                <h3>Request For Quotation:
                    <t t-esc="rfq.name"/>
                </h3>
                <!-- RFQ Header Info -->
                <div class="card mt-3 shadow-sm">
                    <div class="card-body">
                        <p>
                            <strong>Vendor:</strong>
                            <t t-esc="rfq.partner_id.name"/>
                        </p>
                        <t t-set="has_quotation"
                            t-value="request.env['purchase.quotation'].sudo().search_count([
                                    ('rfq_origin', '=', rfq.name),
                                    ('email_address', '=', request.env.user.email)
                            ]) > 0"/>
                        <p>
                            <strong>Status:</strong>
                            <span t-if="has_quotation" class="badge bg-success">Sent</span>
                            <span t-else="" class="badge bg-warning text-dark">Pending</span>
                        </p>
                        <p>
                            <strong>Project:</strong>
                            <t t-esc="rfq.project_id.display_name or 'N/A'"/>
                        </p>
                    </div>
                </div>
                <!-- RFQ Line Items -->
                <div class="card mt-4 shadow-sm">
                    <div class="card-body">
                        <h5>Products Requested</h5>
                        <table class="table table-bordered mt-3">
                            <thead>
                                <tr>
                                    <th>Description</th>
                                    <th>Quantity</th>
                                    <th>Unit</th>
                                    <th>Unit Price</th>
                                    <th>Subtotal</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="rfq.custom_line_ids" t-as="line">
                                    <tr>
                                        <td>
                                            <t t-esc="line.name"/>
                                        </td>
                                        <td>
                                            <t t-esc="line.quantity"/>
                                        </td>
                                        <td>
                                            <t t-esc="line.unit"/>
                                        </td>
                                        <td>
                                            <t t-esc="line.price_unit"/>
                                        </td>
                                        <td>
                                            <t t-esc="line.subtotal"/>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </t>
    </template>
</odoo>